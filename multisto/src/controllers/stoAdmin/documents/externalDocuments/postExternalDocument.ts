import { Request, Response } from "express";import common from "../../../../modules/common";import mysql from "../../../../modules/mysql";export default async (req: Request, res: Response) => {    common.checkUserAuthorizationForModuleSTO(req, res, 33);    const reqObj = req as any;    const globalObj = global as any;    const sharePurchaseMode = globalObj.config.sharePurchaseDocumentsMode;    let externalDocumentIDColumn = '';    let externalDocumentIDValue = '';    if (sharePurchaseMode === 'docuSign') {        externalDocumentIDColumn = "docusignDocumentID";        externalDocumentIDValue = req.body.docusignDocumentID;    } else if (sharePurchaseMode === 'helloSign') {        externalDocumentIDColumn = "helloSignDocumentID";        externalDocumentIDValue = req.body.helloSignDocumentID;    }    const sql = req.body.id == null ?        `INSERT INTO documents(title, stoid, directoryid, ${externalDocumentIDColumn})            VALUES(?, ?, ?, ?)` :        `UPDATE documents SET title= ?, ${externalDocumentIDColumn}= ? WHERE id= ? AND stoid = ?`;    const data = req.body.id == null ?        [req.body.title, reqObj.session.stoid, req.body.dirid, externalDocumentIDValue] :        [req.body.title, externalDocumentIDValue, req.body.id, reqObj.session.stoid];    mysql.executeSQLStatement(sql, data).then((result:any) => {        const id = req.body.id?? result.insertId;        res.redirect(`externalDoc?id=${id}&dirid=${req.body.dirid}`);    }).catch((error: any) => {        common.handleError(req, res, `${error.toString()} - Error occurred in postExternalDocuments`);    });}